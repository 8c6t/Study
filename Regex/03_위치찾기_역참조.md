정규표현식 위치 찾기와 역참조
========

## 1. 경계 지정하기

### 가. 단어 경계 지정하기

- `\b`: 단어의 시작이나 마지막을 일치시킬 때 사용
  - 완전한 단어를 일치시키고자 하는 경우 앞뒤에 `\b`를 붙인다
- `\B`: 단어 경계와 일치시키고 싶지 않을 때 사용

### 나. 문자열 경계 정의하기

- `^`으로 문자의 시작을 설정
  - `^\s*<\?xml.*?\?>` : XML문서 여부 체크(`<?xml version="1.0" encoding="UTF-8"?>`)
- `$`로 문자의 마지막을 설정
  - `\s*$` : 공백 문자와 그 뒤에 오는 문자열 마지막을 찾음

> `^`은 대괄호(집합) 바로 다음에 사용하면 부정을 의미하지만, 집합 밖에서는 패턴 시작 부분에 `^` 문자를 쓰면 문자열의 시작 부분과 일치한다

### 다. 다중행 모드 사용하기

- `(?m)` : 다중행 모드 변경. 강제로 정규 표현식 엔진이 줄바꿈 문자를 문자열 구분자로 인식한다
  - 지원하지 않는 정규 표현식 구현도 많으므로주의
  - `(?m)^\s*//.*$`: 자바스크립트 주석을 모두 찾음


## 2. 하위 표현식 사용하기

### 가. 하위 표현식으로 묶기

- 큰 표현식 안에 속한 일부 표현식을 한 항목으로 다루도록 묶은 것
- 괄호(`()`) 사이에 사용
  - `(&nbsp;){2,}` : 중복된 강제 공백 표현 찾기
  - `(\d{1,3}\.){3}\d{1,3}` : IP 주소 찾기(345, 700, 999 같이 IP숫자로 바르지 않은 숫자도 일치됨)


### 나. 중첩된 하위 표현식

`(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5]))\.){3}((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5]))`

- 모든 한 자리 혹은 두 자리 숫자
- 1로 시작하는 모든 세 자리 숫자
- 2로 시작하면서 두 번째 자리 숫자가 0부터 4 사이의 모든 세 자리 숫자
- 25로 시작하면서 세 번째 자리 숫자가 0부터 5 사이의 모든 세 자리 숫자
- 네 묶음의 범위를 각각 0에서 255 사이로 제한하여 실제로 올바른 IP주소만을 찾음


## 3. 역참조 사용하기

### 가. 역참조로 찾기

- 앞서 일치한 부분을 다시 가리킴(먼저 일치한 단어)
- 참조하는 표현식이 하위 표현식일 때(그리고 하위 표현식으로 괄호로 감싸였을 때)만 작동한다
- `<[hH]([1-6])>.*?<\/[hH]\1>`: h1~h6 태그 탐색
  - ([1-6])으로 참조할 표현식을 하위 표현식으로 만듬
  - `\1`로 참조할 표현식 위치 지정(0번은 표현식 전체를 가리킴)
  - 하위표현식에서 일치한 숫자와 일치함


### 나. 치환 작업 수행하기

- 정규표현식을 이용한 치환 작업은 역참조와 같이 활용
- 정규표현식 검색을 지원하는 IDE 등에서 주로 활용
- `$숫자`로 참조할 정규표현식을 지정

#### 예제1. 메일 주소 a 태그 붙이기

`nkw8620@gmail.com` -> `<a href='mailto:nkw8620@gmail.com'>nkw8620@gmail.com</a>`

- 정규표현식: `(\w+[\w\.]*@[\w\.]+\.\w+)`
- 치환식: `<a href='mailto:$1'>$1</a>`

#### 예제2. 전화번호 형식 변경

`313-555-1234` -> `(313) 555-1234`

- 정규표현식: `(\d{3})(-)(\d{3})(-)(\d{4})`
- 치환식: `($1) ($3)-($5)`

#### 대소문자 변환

| 메타 문자 | 설명 |
|-|-|
| `\E` | `\L` 혹은 `\U` 변환의 끝을 나타냄 |
| `\l` | 다음에 오는 글자를 소문자로 변환 |
| `\L` | `\E`를 만날 때까지 모든 문자를 소문자로 변환 |
| `\u` | 다음에 오는 글자를 대문자로 변환 |
| `\U` | `\E`를 만날 때까지 모든 문자를 대문자로 변환 |

#### 예제3. 대소문자 변환

`<h1>Welcome to my Homepage</h1>` -> `<h1>WELCOME TO MY HOMEPAGE</h1>`

- 정규표현식: `(<[Hh]1>)(.*?)(</[Hh]1>)`
- 치환식: `$1\U$2\E$3`
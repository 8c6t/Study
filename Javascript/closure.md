클로저
========

- 함수 내부에서 생성한 데이터와 그 유효범위(스코프)로 인해 발생하는 특수한 현상/상태
- 함수 객체와 그 함수가 선언될 당시의 환경정보 사이의 조합
- **함수를 리턴하더라도 최초 생성된 스코프 및 Lexical Environment는 변하지 않음 = 최초 선언된 정보를 가지고 있음**


### ※ Lexical Environment
- 자바스크립트 코드의 실행 환경, 범위를 구조적으로 엮으면서 독립적으로 실행하기 위한 환경
- 선언 당시의 환경에 대한 정보를 담는 객체
- environmentRecord: 현재 문맥의 식별자를 수집(hoisting의 개념)
- outerEnvironmentReference: 외부 식별자를 가져옴. scope chain를 만듬


## 장점

1. 접근 권한 제어
2. 지역변수 보호
3. 데이터 보존 및 활용


## 예시

```js
function a() {
  var _x = 1;
  return {
    get x() { return _x; },
    set x(v) { _x = v },
  }
}

var c = a();
c.x = 10;
```

- 외부 함수(a)를 호출하면 그 함수의 렉시컬 환경 컴포넌트가 생성됨. 그리고 그 안에서 중첩된 중첩 함수(getter/setter)의 함수 객체를 생성해서 반환
  - 그 결과 외부 함수의 렉시컬 환경 컴포넌트를 참조하는 중첩 함수가 정의한 클로저가 생성됨
  - 즉, 외부 함수는 클로저를 생성하는 팩토리 함수라고 할 수 있음
- 외부 함수가 속한 렉시컬 환경 컴포넌트는 클로저 내부 상태 자체. 외부 함수가 호출될 때마다 새로 생성됨
- 중첩 함수의 함수 객체가 있는 한 외부 함수가 속한 렉시컬 환경 컴포넌트는 지워지지 않음. 외부 함수의 함수 객체가 사라져도 지워지지 않음
- 클로저 내부 상태는 외부로부터 은폐되어 있으며 중첩 함수 안에서만 읽거나 쓸 수 있음


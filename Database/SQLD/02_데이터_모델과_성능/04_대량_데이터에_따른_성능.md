대량 데이터에 따른 성능
========

## 1. 대량 데이터발생에 따른 테이블 분할 개요

- 대량의 데이터가 존재하는 테이블에 많은 트랜잭션이 발생하여 성능이 저하되는 경우
- 트랜잭션이 분산 처리될 수 있도록 테이블 단위에서 분할의 방법을 적용할 필요가 있다
- 테이블 구조에 대해 수평/수직 분할 설계를 통해 성능저하를 예방할 수 있음

### 성능 저하를 유발할 수 있는 경우

1. 한 테이블에 **데이터가 대량으로 집중**되는 경우
    - **인덱스의 Tree 구조가 너무 커져** 효율성이 떨어져 데이터를 처리할 때 디스크 I/O를 많이 유발하게 된다
2. 한 테이블에 여러 개의 컬럼이 존재하여 디스크에 많은 블록을 점유하는 경우
    - 컬럼이 많아지게 되면 물리적인 디스크에 여러 블록에 데이터가 저장되기 된다
    - 데이터가 디스크의 여러 블록에 존재하게 되어 디스크에서 데이터를 읽는 I/O량이 많아져 성능이 저하된다
3. 로우 체이닝(Row Chaining): 로우 길이가 너무 길어서 데이터 블록 하나에 데이터가 모두 저장되지 않고 두 개 이상의 블록에 걸쳐 하나의 로우가 저장되어 있는 형태
4. 로우 마이그레이션(Row Migration): 데이터 블록에서 수정이 발생하면 수정된 데이터를 해당 데이터 블록에서 저장하지 못 하고 다른 블록의 빈 공간을 찾아 저장하는 방식


## 2. 한 테이에 많은 수의 컬럼을 가지고 있는 경우

- 칼럼수가 많은 테이블에서 데이터를 처리하게 되면 디스크 I/O량이 증가하여 성능이 저하
- 트랜잭션을 분석하여 적절하게 1:1 관계로 분리함으로서 성능향상이 가능하도록 해야 한다


## 3. 대량 데이터 저장 및 처리로 인한 성능 저하

- 논리적으로는 하나의 테이블로 보이지만 물리적으로 여러 개의 테이블 스페이스에 쪼개어 저장될 수 있는 구조의 파티셔닝을 적용


### 가. RANGE PARTITION

- 대상 테이블이 **날짜 또는 숫자값으로 분리**가 가능하고 **각 영역별로 트랜잭션이 분리** 된다면 RANGE PARTITION을 적용한다


### 나. LIST PARTITION

- 지점, 사업소, 사업장, 핵심적인 코드값 등으로 PK가 구성되어 있고, 대량의 데이터가 있는 테이블이라면 값 각각에 의해 파티셔닝이 되는 LIST PARTITION을 적용


### 다. HASH PARTITION

- 지정된 HASH 조건에 따라 해슁 알고리즘이 적용되어 테이블이 분리되며 설계자는 테이블에 데이터가 정확하게 어떻게 들어갔는지 알 수 없다


## 4. 테이블에 대한 수평분할/수직분할의 절차

1. 데이터 모델링을 완성한다
2. 데이터베이스 용량 산정을 한다
3. 대량 데이터가 처리되는 테이블에 대해서 트랜잭션 처리 패턴을 분석한다
4. 칼럼 단위로 집중화된 처리가 발생하는지, 로우 단위로 집중화된 처리가 발생하는지 분석하여 집중화된 단위로 테이블을 분리하는 것을 검토한다

